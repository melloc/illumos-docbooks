<chapter xml:id="usersetup-92366">
<title>Managing User Accounts and Groups (Tasks)</title>
<para>This chapter describes how to set up and maintain user accounts and groups.</para>
<itemizedlist>
	<para>For information on the procedures associated with setting up and maintaining user accounts and groups, see the following:</para>
	<listitem><para><xref linkend="usersetup-129" /></para></listitem>
	<listitem><para><xref linkend="usersetup-128" /></para></listitem>
</itemizedlist>
<para>For background information about managing user accounts and groups, see <xref linkend="userconcept-97366" />.</para>
<sect1 xml:id="usersetup-129"><title>Setting Up User Accounts (Task Map)</title><informaltable frame="all"><tgroup cols="3" colsep="1" rowsep="1"><?PubTbl tgroup dispwid="5.48in"?><colspec colname="colspec3" colwidth="33.13*"/><colspec colname="colspec4" colwidth="33.13*"/><colspec colname="colspec5" colwidth="32.73*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>For Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Gather user information.</para>
</entry><entry><para>Use a standard form to gather user information to help you keep user
information organized.</para>
</entry><entry><para><xref linkend="usersetup-21417" /></para>
</entry>
</row><row><entry><para>Customize user initialization files.</para>
</entry><entry><para>You can set up user initialization files (<filename>.cshrc</filename>, <filename>.profile</filename>, <filename>.login</filename>), so that you can provide
new users with consistent environments.</para>
</entry><entry><para><xref linkend="usersetup-52714" /></para> </entry>
</row><row><entry><para>Add a group.</para>
</entry><entry><para>You can add a group with the following tools:</para><para>Solaris Management Console's Groups tool</para><para>Solaris command-line interface tools</para>
</entry><entry><para><xref linkend="usersetup-30" /></para><para><xref linkend="usersetup-32" /></para> </entry>
</row><row><entry><para>Add a user.</para>
</entry><entry><para>You can add a user with the following tools:</para><para>Solaris Management Console's Users tool</para><para>Solaris command-line interface tools</para>
</entry><entry><para><xref linkend="usersetup-21" /></para><para><xref linkend="usersetup-32" /></para></entry>
</row><row><entry><para>Set up a user template.</para>
</entry><entry><para>You can create a user template so that you don't have to manually add
all similar user properties.</para>
</entry><entry><para>See Solaris Management Console online help</para>
</entry>
</row><row><entry><para>Add rights or a role to a user.</para>
</entry><entry><para>You can add rights or a role to a user so that the user can perform
a specific command or task.</para>
</entry><entry><para>See Solaris Management Console online help</para>
</entry>
</row><row><entry><para>Share the user's home directory.</para>
</entry><entry><para>You must share the user's home directory so that the directory can be
remotely mounted from the user's system. </para>
</entry><entry><para><xref linkend="usersetup-15731" /></para>
</entry>
</row><row><entry><para>Mount the user's home directory.</para>
</entry><entry><para>You must mount the user's home directory on the user's system.</para>
</entry><entry><para><xref linkend="usersetup-57972" /></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><sect2 xml:id="usersetup-21417"><title>Gathering User Information</title><para><indexterm xml:id="usersetup-ix713"><primary>user accounts</primary><secondary>setting up</secondary><tertiary>information sheet</tertiary></indexterm>You can create a form such as the following to gather information
about users before adding their accounts. </para><informaltable frame="all"><tgroup cols="2" colsep="1" rowsep="1"><colspec colwidth="50*"/><colspec colwidth="50*"/><thead><row><entry><para>Item</para>
</entry><entry><para>Description</para>
</entry>
</row>
</thead><tbody><row><entry><para>User Name:</para>
</entry><entry>
</entry>
</row><row><entry><para>Role Name:</para>
</entry><entry>
</entry>
</row><row><entry><para>Profiles or Authorizations:</para>
</entry><entry>
</entry>
</row><row><entry><para>UID:</para>
</entry><entry>
</entry>
</row><row><entry><para>Primary Group:</para>
</entry><entry>
</entry>
</row><row><entry><para>Secondary Groups:</para>
</entry><entry>
</entry>
</row><row><entry><para>Comment:</para>
</entry><entry>
</entry>
</row><row><entry><para>Default Shell:</para>
</entry><entry>
</entry>
</row><row><entry><para>Password Status and Aging:</para>
</entry><entry>
</entry>
</row><row><entry><para>Home Directory Path Name:</para>
</entry><entry>
</entry>
</row><row><entry><para>Mounting Method:</para>
</entry><entry>
</entry>
</row><row><entry><para>Permissions on Home Directory:</para>
</entry><entry>
</entry>
</row><row><entry><para>Mail Server:</para>
</entry><entry>
</entry>
</row><row><entry><para>Department Name:</para>
</entry><entry>
</entry>
</row><row><entry><para>Department Administrator:</para>
</entry><entry>
</entry>
</row><row><entry><para>Manager:</para>
</entry><entry>
</entry>
</row><row><entry><para>Employee Name:</para>
</entry><entry>
</entry>
</row><row><entry><para>Employee Title:</para>
</entry><entry>
</entry>
</row><row><entry><para>Employee Status:</para>
</entry><entry>
</entry>
</row><row><entry><para>Employee Number:</para>
</entry><entry>
</entry>
</row><row><entry><para>Start Date:</para>
</entry><entry>
</entry>
</row><row><entry><para>Add to These Mail Aliases:</para>
</entry><entry>
</entry>
</row><row><entry><para>Desktop System Name:</para>
</entry><entry>
</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</sect2><task xml:id="usersetup-52714"><title>How to Customize User Initialization Files</title><procedure>&rolestep.sgm;<step xml:id="usersetup-step-5"><para>Create a skeleton directory for each type
of user.</para><screen># <userinput>mkdir /</userinput><replaceable>shared-dir</replaceable><userinput>/skel/</userinput><replaceable>user-type</replaceable></screen><variablelist><varlistentry><term><replaceable>shared-dir</replaceable></term><listitem><para>The name of a directory that is available to other systems
on the network. </para>
</listitem>
</varlistentry><varlistentry><term><replaceable>user-type</replaceable></term><listitem><para>The name of a directory to store initialization files for
a type of user.</para>
</listitem>
</varlistentry>
</variablelist>
</step><step xml:id="usersetup-step-6"><para>Copy the default user initialization files
into the directories that you created for different types of users.   </para><screen># <userinput>cp /etc/skel/local.cshrc /</userinput><replaceable>shared-dir</replaceable><userinput>/skel/</userinput><replaceable>user-type</replaceable><userinput>/.cshrc</userinput>
# <userinput>cp /etc/skel/local.login /</userinput><replaceable>shared-dir</replaceable><userinput>/skel/</userinput><replaceable>user-type</replaceable><userinput>/.login</userinput>
# <userinput>cp /etc/skel/local.profile /</userinput><replaceable>shared-dir</replaceable><userinput>/skel/</userinput><replaceable>user-type</replaceable><userinput>/.profile</userinput></screen><note><para>If the account has profiles assigned to it, then the user has
to launch a special version of the shell called a profile shell to use commands
(with any security attributes) that are assigned to the profile. There are
three <emphasis>profile shells</emphasis> corresponding to the types of shells: <command>pfsh</command> (Bourne shell), <command>pfcsh</command> (C shell), and <command>pfksh</command> (Korn shell). For information about profile shells, see <olink targetdoc="sysadv6" targetptr="rbac-1" remap="external"><citetitle remap="section">Role-Based Access Control (Overview)</citetitle> in <citetitle remap="book">System Administration Guide: Security Services</citetitle></olink>.</para>
</note>
</step><step xml:id="usersetup-step-7"><para>Edit the user initialization files for each
user type and customize them based on your site's needs.</para><para>For a
detailed description on the ways to customize the user initialization files,
see <xref linkend="userconcept-23295" />.</para>
</step><step xml:id="usersetup-step-8"><para>Set the permissions for the user initialization
files.</para><screen># <userinput>chmod 744</userinput> <userinput>/</userinput><replaceable>shared-dir</replaceable><userinput>/skel/</userinput><replaceable>user-type</replaceable><userinput>/.*</userinput></screen>
</step><step xml:id="usersetup-step-2"><para>Verify that the permissions for the user
initialization files are correct.</para><screen># <userinput>ls -la</userinput> <replaceable>/shared-dir</replaceable><userinput>/skel/*</userinput></screen>
</step>
</procedure><example><title>Customizing User Initialization Files</title><para>The following example shows how to customize the C-shell user initialization
file in the <filename>/export/skel/enduser</filename> directory designated
for a particular type of user. For an example of a <filename>.cshrc</filename> file,
see <xref linkend="userconcept-25815" />.</para><screen># <userinput>mkdir /export/skel/enduser</userinput>
# <userinput>cp /etc/skel/local.cshrc /export/skel/enduser/.cshrc</userinput>
 
(<replaceable>Edit .cshrc file</replaceable>)
# <userinput>chmod 744 /export/skel/enduser/.*</userinput></screen>
</example>
</task><task xml:id="usersetup-30"><title>How to Add a Group With the Solaris Management
Console's Groups Tool</title><tasksummary><para>You can add existing users to the group when you add the group. Or,
you can just add the group and then add the user to the group when you add
the user.</para>
</tasksummary>
<procedure>&rolestep.sgm;<step xml:id="usersetup-step-23">
<para>Start the Solaris Management Console.</para>
<screen># <userinput>/usr/sadm/bin/smc &amp;</userinput></screen>
<para>For more information on starting the Solaris Management Console, see <xref linkend="smcover-42573" /> or <xref linkend="smcover-23" />.</para>
</step><step xml:id="usersetup-step-24"><para>Click the This Computer icon under the
Management Tools icon in the Navigation pane.</para>
<para>A list of categories is displayed.</para>
</step><step xml:id="usersetup-step-25"><para>(Optional) Select the appropriate toolbox for your name service environment.</para>
</step><step xml:id="usersetup-step-26"><para>Click the System Configuration icon.</para></step><step xml:id="usersetup-step-27"><para>Click the User icon and provide the superuser
password or the role password.</para>
</step><step xml:id="usersetup-step-29"><para>Click the Groups icon. Select Add Group from the Action menu.</para>
<para>Use the Context help to add a group to the system.</para>
</step><step xml:id="usersetup-step-36"><para>Identify the group name at the Group Name
prompt under Group Identification.</para><para>For example, <literal>mechanoids</literal>.</para>
</step><step xml:id="usersetup-step-37"><para>Identify the group number at the Group
ID number prompt.</para><para>For example, GID 101.</para>
</step><step xml:id="usersetup-step-38"><para>Click OK.</para>
</step>
</procedure>
</task><task xml:id="usersetup-21"><title>How to Add a User With the Solaris Management
Console's Users Tool</title><tasksummary><para>Use the following procedure to add a user with the Solaris Management
Console's Users tool.</para>
</tasksummary><procedure>&rolestep.sgm;<step xml:id="usersetup-step-1"><para>Start the Solaris Management Console.</para><screen># <userinput>/usr/sadm/bin/smc &amp;</userinput></screen><para>For more information on starting the Solaris Management Console, see <xref linkend="smcover-42573" /> or <xref linkend="smcover-23" />.</para>
</step><step xml:id="usersetup-step-9"><para>Click the This Computer icon under the Management
Tools icon in the Navigation pane.</para><para>A list of categories is displayed.</para>
</step><step xml:id="usersetup-step-10"><para>(Optional) Select the appropriate toolbox
for your name service environment.</para>
</step><step xml:id="usersetup-step-11"><para>Click the System Configuration icon.</para>
</step><step xml:id="usersetup-step-12"><para>Click the User icon and provide the superuser
password or the role password.</para>
</step><step xml:id="usersetup-step-15"><para>Click the User Accounts icon.</para><para>Use
the Context help to add a user to the system.</para>
</step><step xml:id="usersetup-step-39"><para>Select Add User&rArr;With Wizard from the
Action menu.</para><para>Click Next between the steps below.</para><substeps><step><para>Identify the user name or login name at the User Name prompt.</para><para>For example, <literal>kryten</literal></para>
</step><step xml:id="usersetup-step-40"><para>(Optional) Identify the user's full name
at the Full Name prompt.</para><para>For example, <literal>kryten series 3000</literal>.</para>
</step><step xml:id="usersetup-step-41"><para>(Optional) Provide a further description
of this user at the Description prompt.</para>
</step><step xml:id="usersetup-step-42"><para>Provide the user ID at the User ID Number
prompt.</para><para>For example, <literal>1001</literal>.</para>
</step><step xml:id="usersetup-step-43"><para>Select the User Must Use This Password
At First Login option.</para><para>Provide a password for the user at the
Password prompt and then confirm the password at the Confirm Password prompt.</para>
</step><step xml:id="usersetup-step-44"><para>Select the user's primary group.</para><para>For
example, <literal>mechanoids</literal>.</para>
</step><step xml:id="usersetup-step-45"><para>Create the user's home directory by accepting
the defaults at the Server and Path prompts.</para>
</step><step xml:id="usersetup-step-46"><para>Specify the mail server.</para>
</step><step xml:id="usersetup-step-47"><para>Review the information you provided and
go back to correct the information, if necessary. Otherwise, click Finish.</para>
</step>
</substeps>
</step>
</procedure>
</task><sect2 xml:id="usersetup-32"><title>Adding Groups and Users With Command-Line
Tools</title><para>This section provides examples of adding users and groups with command-line
tools.</para><sect3 xml:id="usersetup-33"><title>Adding a Group and User With the <command>groupadd</command> and <command>useradd</command> Commands</title><para>The following example shows how to use the <command>groupadd</command> and <command>useradd</command> commands to add the group <literal>scutters</literal> and
the user <literal>scutter1</literal> to files on the local system. These commands
cannot be used to manage users in a name service environment.</para><screen># <userinput>groupadd -g 102 scutters</userinput>
# <userinput>useradd -u 1003 -g 102 -d /export/home/scutter1 -s /bin/csh \
-c "Scutter 1" -m -k /etc/skel</userinput> <userinput>scutter1</userinput>
64 blocks</screen><para>For more information, see the <citerefentry><refentrytitle>groupadd</refentrytitle><manvolnum>1M</manvolnum></citerefentry> and <citerefentry><refentrytitle>useradd</refentrytitle><manvolnum>1M</manvolnum></citerefentry> manual pages.</para>
</sect3><sect3 xml:id="usersetup-34"><title>Adding a Group and User With the <command>smgroup</command> and <command>smuser</command> Commands</title><para>The following example shows how to use the <command>smgroup</command> and <command>smuser</command> commands to add the group <literal>gelfs</literal> and the
user <literal>camille</literal> to the NIS domain <literal>solar.com</literal> on
the host <literal>starlite</literal>.</para><screen># <userinput>/usr/sadm/bin/smgroup add -D nis:/starlitesolar.com -- -g 103 -n gelfs</userinput>
# <userinput>/usr/sadm/bin/smuser add -D nis:/starlite/solar.com -- -u 1004</userinput> 
<userinput>-n camille -c "Camille G." -d /export/home/camille -s /bin/csh -g gelfs</userinput></screen><para>For more information, see the <citerefentry><refentrytitle>smgroup</refentrytitle><manvolnum>1M</manvolnum></citerefentry> and <citerefentry><refentrytitle>smuser</refentrytitle><manvolnum>1M</manvolnum></citerefentry> manual pages.</para>
</sect3>
</sect2>
<sect2 xml:id="userconcept-29">
<title>Setting Up Home Directories With the Solaris Management Console</title>
<itemizedlist>
	<para>Keep the following in mind when using the Solaris Management Console tools to manage user home directories:</para>
	<listitem>
		<para>If you use the Users tool's Add User Wizard to add a user account and you specify the user's home directory as <filename>/export/home/</filename><replaceable>username</replaceable>, the home directory is automatically set up to automount. Also, the following entry is added to the <literal>passwd</literal> file.</para>
		<screen>/home/<replaceable>username</replaceable></screen>
	</listitem>
	<listitem>
		<para>
			There is only way you can use Users tool to set up a user
			account that does not automount the home directory. First, set up a user account
			template that disables this feature. Then, add users with this template. You
			cannot disable this feature with the Add User Wizard.
		</para>
	</listitem>
	<listitem>
		<para>
			You can use the <command>smuser add</command> command
			with the <option>x autohome=N</option> option to add a
			user without automounting the user's home directory. However,
			there is no option to the <command>smuser delete</command>
			command to remove the home directory after the user is
			added.  You would have to remove the user and the
			user's home directory with the Users tool.
		</para>
	</listitem>
</itemizedlist>
</sect2>
<task xml:id="usersetup-15731">
<title>How to Share a User's Home Directory</title>
<tasksummary><para>Use the following procedure to share a user's home directory.</para>
</tasksummary><procedure><step xml:id="usersetup-step-59"><para><indexterm xml:id="usersetup-ix762"><primary>user home directories</primary><secondary>sharing (how to)</secondary></indexterm><indexterm xml:id="usersetup-ix764"><primary>sharing</primary><secondary>user home directories (how to)</secondary></indexterm>Become superuser or assume an equivalent role
on the system that contains the home directory.</para>
</step><step xml:id="usersetup-step-60"><para>Verify that the <command>mountd</command> daemon
is running.</para><para>In this release, <command>mountd</command> is now
started as part of the NFS server service. To see if the <command>mountd</command> daemon
is running, type the following command:</para><screen># <userinput>svcs network/nfs/server</userinput>
STATE          STIME    FMRI
online         Aug_26   svc:/network/nfs/server:default</screen>
</step><step xml:id="usersetup-step-61"><para>If the <command>mountd</command> daemon
is not running, start it.</para><screen># <userinput>svcadm network/nfs/server</userinput></screen>
</step><step xml:id="usersetup-step-62"><para>List the file systems that are shared on
the system.</para><screen># <userinput>share</userinput></screen>
</step><step xml:id="usersetup-step-63"><para>Select one of the following based on whether
the file system that contains the user's home directory is already shared.</para><substeps><step><para>If the user's home directory is already shared, go to the step
8.</para>
</step><step xml:id="usersetup-step-14"><para>If the user's home directory is not shared,
go to <xref linkend="usersetup-step-64" />.</para>
</step>
</substeps>
</step><step xml:id="usersetup-step-64"><para><indexterm xml:id="usersetup-ix767"><primary><filename>/etc/dfs/dfstab</filename> file</primary><secondary sortas="etc/dfs/dfstab file">user home directory sharing and</secondary></indexterm><indexterm xml:id="usersetup-ix768"><primary><filename>dfstab</filename> file</primary><secondary>user home directory sharing and</secondary></indexterm>Edit the <filename>/etc/dfs/dfstab</filename> file and add the following line: </para><screen>share -F nfs <replaceable>/file-system</replaceable></screen><para><replaceable>/file-system</replaceable> is the file system that contains
the user's home directory that you need to share. By convention, the file
system is <filename>/export/home</filename>. </para>
</step><step xml:id="usersetup-step-65"><para>Share the file systems listed in the <filename>/etc/dfs/dfstab</filename> file.</para><screen># <userinput>shareall -F nfs</userinput></screen><para>This command executes all the <command>share</command> commands in the <command>/etc/dfs/dfstab</command> file so that you do not have to wait to reboot the
system.</para>
</step><step xml:id="usersetup-step-66"><para>Verify that a user's home directory is
shared.</para><screen># <userinput>share</userinput></screen>
</step>
</procedure><example><title>Sharing a User's Home Directory</title><para>The following example shows how to share the <filename>/export/home</filename> directory.</para><screen># <userinput>svcs network/nfs/server</userinput>
# <userinput>svcadm network/nfs/server</userinput>
# <userinput>share</userinput>
# <userinput>vi /etc/dfs/dfstab</userinput>
 
(<replaceable>The line</replaceable> share -F nfs /export/home <replaceable>is added.</replaceable>)
# <userinput>shareall -F nfs</userinput>
# <userinput>share</userinput>
-               /usr/dist                ro   "" 
-               /export/home/<replaceable>user-name</replaceable>     rw   ""  </screen>
</example><taskrelated role="see-also"><para>If the user's home directory is not located on the user's system, you
have to mount the user's home directory from the system where it is located.
For detailed instructions, see <xref linkend="usersetup-57972" />.    </para>
</taskrelated>
</task><task xml:id="usersetup-57972"><title>How to Mount a User's Home Directory</title><tasksummary><para>For information on automounting a home directory, see <olink targetdoc="sysadv4" targetptr="rfsadmin-127" remap="external"><citetitle remap="section">Task Overview for Autofs Administration</citetitle> in <citetitle remap="book">System Administration Guide: Network Services</citetitle></olink>.</para>
</tasksummary><procedure><step xml:id="usersetup-step-69"><para>Make sure that the user's home directory
is shared.</para><para><indexterm xml:id="usersetup-ix774"><primary>user home directories</primary><secondary>mounting (how to)</secondary></indexterm><indexterm xml:id="usersetup-ix775"><primary>mounting</primary><secondary>user home directories (how to)</secondary></indexterm>For more information, see <xref linkend="usersetup-15731" />.</para>
</step><step xml:id="usersetup-step-70"><para>Log in as superuser on the user's system.</para>
</step><step xml:id="usersetup-step-71"><para><indexterm xml:id="usersetup-ix777"><primary sortas="etc/vfstab file"><filename>/etc/vfstab</filename> file</primary></indexterm>Edit the <filename>/etc/vfstab</filename> file and create an entry
for the user's home directory.</para><screen><replaceable>system-name</replaceable>:/export/home/<replaceable>user-name</replaceable> - /export/home/<replaceable>username</replaceable> nfs - yes rw</screen><variablelist><varlistentry><term><replaceable>system-name</replaceable></term><listitem><para>The name of the system where the home directory is located.</para>
</listitem>
</varlistentry><varlistentry><term><filename>/export/home/</filename><replaceable>username</replaceable></term><listitem><para>The name of the user's home directory that will be shared.
By convention, <filename>/export/home/</filename><replaceable>username</replaceable> contains
user home directories. However, you can use a different file system. </para>
</listitem>
</varlistentry><varlistentry><term><literal>-</literal></term><listitem><para>Required placeholders in the entry.</para>
</listitem>
</varlistentry><varlistentry><term><filename>/export/home/</filename><replaceable>username</replaceable></term><listitem><para>The name of the directory where the user's home directory
will be mounted.</para>
</listitem>
</varlistentry>
</variablelist><para>For more information about adding an entry to the <filename>/etc/vfstab</filename> file,
see <olink targetdoc="sagdfs" targetptr="fsmount-5" remap="external"><citetitle remap="section">Mounting File Systems</citetitle> in <citetitle remap="book">System Administration Guide: Devices and File Systems</citetitle></olink>.</para>
</step><step xml:id="usersetup-step-72"><para>Create the mount point for the user's home
directory.</para><screen># <userinput>mkdir -p /export/home/</userinput><replaceable>username</replaceable></screen>
</step><step xml:id="usersetup-step-73"><para>Mount the user's home directory.</para><screen># <userinput>mountall</userinput></screen><para>All entries in the current <filename>vfstab</filename> file (whose <literal>mount at boot</literal> fields are set to <literal>yes</literal>) are mounted.</para>
</step><step xml:id="usersetup-step-74"><para>Verify that the home directory is mounted.</para><screen># <userinput>mount | grep</userinput> <replaceable>username</replaceable></screen>
</step>
</procedure><example><title>Mounting a User's Home Directory</title><para>The following example shows how to mount user <literal>ripley</literal>'s
home directory.</para><screen width="100"># <userinput>vi /etc/vfstab</userinput>
 
(<replaceable>The line</replaceable> venus:/export/home/ripley - /export/home/ripley
nfs - yes rw <replaceable>is added.</replaceable>)
# <userinput>mkdir -p /export/home/ripley</userinput>
# <userinput>mountall</userinput>
# <userinput>mount</userinput>
/ on /dev/dsk/c0t0d0s0 read/write/setuid/intr/largefiles/xattr/onerror=panic/dev=...
/devices on /devices read/write/setuid/dev=46c0000 on Thu Jan  8 09:38:19 2004
/usr on /dev/dsk/c0t0d0s6 read/write/setuid/intr/largefiles/xattr/onerror=panic/dev=...
/proc on /proc read/write/setuid/dev=4700000 on Thu Jan  8 09:38:27 2004
/etc/mnttab on mnttab read/write/setuid/dev=47c0000 on Thu Jan  8 09:38:27 2004
/dev/fd on fd read/write/setuid/dev=4800000 on Thu Jan  8 09:38:30 2004
/var/run on swap read/write/setuid/xattr/dev=1 on Thu Jan  8 09:38:30 2004
/tmp on swap read/write/setuid/xattr/dev=2 on Thu Jan  8 09:38:30 2004
/export/home on /dev/dsk/c0t0d0s7 read/write/setuid/intr/largefiles/xattr/onerror=...
/export/home/ripley on venus:/export/home/ripley remote/read/write/setuid/xattr/dev=...</screen>
</example>
</task>
</sect1><sect1 xml:id="usersetup-128"><title>Maintaining User Accounts (Task Map)</title><informaltable frame="all"><tgroup cols="3" colsep="1" rowsep="1"><colspec colname="colspec0" colwidth="33*"/><colspec colname="colspec1" colwidth="33*"/><colspec colname="colspec2" colwidth="33*"/><thead><row><entry><para>Task</para>
</entry><entry><para>Description</para>
</entry><entry><para>Instructions</para>
</entry>
</row>
</thead><tbody><row><entry><para>Modify a group.</para>
</entry><entry><para>You can modify a group's name or the users in a group by using the Groups
tool.</para>
</entry><entry><para><xref linkend="usersetup-48" /></para>
</entry>
</row><row><entry><para>Delete a group.</para>
</entry><entry><para>You can delete a group if it is no longer needed.</para>
</entry><entry><para><xref linkend="usersetup-52" /></para>
</entry>
</row><row><entry><para>Modify a user account.</para>
</entry><entry><para><emphasis>Disable a user account</emphasis> </para><para>You can temporarily disable a user account if it will be needed in the
future.</para><para><emphasis>Change a user's password</emphasis></para><para>You might need to change a user's password if the user forgets it.</para><para><emphasis>Set password aging</emphasis></para><para>You can force users to change their passwords periodically with User
Account tool's Password Options menu.</para>
</entry><entry><para><xref linkend="usersetup-58" /></para><para></para><para></para><para></para><para><xref linkend="usersetup-53" /></para><para></para><para></para><para></para><para><xref linkend="usersetup-57" /></para>
</entry>
</row><row><entry><para>Delete a user account.</para>
</entry><entry><para>You can delete a user account if it is no longer needed.</para>
</entry><entry><para><xref linkend="usersetup-59" /></para>
</entry>
</row>
</tbody>
</tgroup>
</informaltable><sect2 xml:id="userconcept-13"><title>Modifying User Accounts</title><para><indexterm xml:id="userconcept-ix309"><primary>user login names</primary><secondary>changing</secondary></indexterm><indexterm xml:id="userconcept-ix311"><primary>user accounts</primary><secondary>ID numbers</secondary></indexterm><indexterm xml:id="userconcept-ix312"><primary>user accounts</primary><secondary>login names</secondary></indexterm><indexterm xml:id="userconcept-ix313"><primary>user ID numbers</primary></indexterm><indexterm xml:id="userconcept-ix315"><primary>names</primary><secondary>user login</secondary><tertiary>changing</tertiary></indexterm><indexterm xml:id="userconcept-ix316"><primary>UIDs</primary></indexterm><indexterm xml:id="userconcept-ix318"><primary>login names (user)</primary><secondary>changing</secondary></indexterm><indexterm xml:id="userconcept-ix319"><primary>ID numbers</primary><secondary>user</secondary></indexterm><indexterm xml:id="userconcept-ix321"><primary>changing</primary><secondary>user login names</secondary></indexterm><indexterm xml:id="userconcept-ix322"><primary>changing</primary><secondary>user ID numbers</secondary></indexterm>Unless you define a user name or UID number that conflicts with
an existing one, you should never need to modify a user account's user name
or UID number. </para><itemizedlist><para>Use the following steps if two user accounts have duplicate user names
or UID numbers:</para><listitem><para>If two user accounts have duplicate UID numbers, use the Users
tool to remove one account and add it again with a different UID number. You
cannot use the Users tool to modify a UID number of an existing user account.</para>
</listitem><listitem><para>If two user accounts have duplicate user names, use the Users
tool to modify one of the accounts and change the user name.</para>
</listitem>
</itemizedlist><para><indexterm xml:id="userconcept-ix324"><primary>files</primary><secondary>changing ownership for user accounts</secondary></indexterm><indexterm xml:id="userconcept-ix325"><primary>directories</primary><secondary>changing ownership for user accounts</secondary></indexterm><indexterm xml:id="userconcept-ix326"><primary>changing</primary><secondary>file ownership for user accounts</secondary></indexterm><indexterm xml:id="userconcept-ix327"><primary>changing</primary><secondary>directory ownership for user accounts</secondary></indexterm><indexterm xml:id="userconcept-ix328"><primary>user home directories</primary><secondary>changing ownership of</secondary></indexterm>If you do use the Users tool to change
a user name, the home directory's ownership is changed, if a home directory
exists for the user.</para><para>One part of a user account that you can change is a user's group memberships.
Select the Properties option from Users tool's Action menu to add or delete
a user's secondary groups. Alternatively, you can use the Groups tool to directly
modify a group's member list. </para><itemizedlist><para>You can also modify the following parts of a user account:</para><listitem><para>Description (comment)</para>
</listitem><listitem><para>Login shell</para>
</listitem><listitem><para>Passwords and password options</para>
</listitem><listitem><para>Home directory and home directory access</para>
</listitem><listitem><para>Rights and roles</para>
</listitem>
</itemizedlist><sect3 xml:id="userconcept-14"><title>Disabling User Accounts</title><para><indexterm xml:id="userconcept-ix368"><primary>disabling</primary><secondary>user accounts</secondary><tertiary>Users tool</tertiary></indexterm><indexterm xml:id="userconcept-ix369"><primary>passwords (user)</primary><secondary>disabling/locking user accounts and</secondary></indexterm><indexterm xml:id="userconcept-ix370"><primary sortas="LK* password"><literal>*LK*</literal> password</primary></indexterm><indexterm xml:id="userconcept-ix371"><primary>disabling</primary><secondary>user accounts</secondary><tertiary>passwords and</tertiary></indexterm><indexterm xml:id="userconcept-ix372"><primary>passwords (user)</primary><secondary sortas="passwords (user):LK* password"><literal>*LK*</literal> password</secondary></indexterm><indexterm xml:id="userconcept-ix373"><primary>Users Tool</primary><secondary>disabling accounts</secondary></indexterm><indexterm xml:id="userconcept-ix374"><primary>user accounts</primary><secondary>disabling/locking</secondary><tertiary>passwords and</tertiary></indexterm><indexterm xml:id="userconcept-ix375"><primary>user accounts</primary><secondary>disabling/locking</secondary><tertiary>Users Tool</tertiary></indexterm>Occasionally, you might
need to temporarily or permanently disable a user account. Disabling or locking
a user account means that an invalid password, <literal>*LK*</literal>, is
assigned to the user account, preventing future logins.</para><para>The easiest way to disable a user account is to lock the password for
an account with Users tool.</para><para><indexterm xml:id="userconcept-ix377"><primary>NIS+</primary><secondary>user accounts and</secondary></indexterm>You can also enter an expiration date
in the account availability section of the User Properties screen. An expiration
date enables you to set a limit on how long the account is active.</para><para>Other ways to disable a user account: set up password aging or change
the user's password.</para>
</sect3><sect3 xml:id="userconcept-11"><title>Deleting User Accounts</title><para><indexterm xml:id="userconcept-ix343"><primary>deleting</primary><secondary>user mailboxes</secondary></indexterm><indexterm xml:id="userconcept-ix345"><primary sortas="etc/password file"><filename>/etc/passwd</filename> file</primary><secondary sortas="">deleting user accounts and</secondary></indexterm><indexterm xml:id="userconcept-ix346"><primary><filename>group</filename> file</primary><secondary>deleting user accounts and</secondary></indexterm><indexterm xml:id="userconcept-ix349"><primary><filename>passwd</filename> file</primary><secondary>deleting user accounts and</secondary></indexterm><indexterm xml:id="userconcept-ix353"><primary>user home directories</primary><secondary>deleting</secondary></indexterm><indexterm xml:id="userconcept-ix354"><primary>deleting</primary><secondary>user home directories</secondary></indexterm>When you delete a
user account with the Users tool, the software deletes the entries in the <filename>passwd</filename> and <filename>group</filename> files. In addition, the files
in the user's home directory and mail directory are deleted also.</para>
</sect3>
</sect2><task xml:id="usersetup-48"><title>How to Modify a Group</title><tasksummary><para>Use the following procedure to modify a group.</para>
</tasksummary><procedure>&rolestep.sgm;<step xml:id="usersetup-step-18"><para>Start the Solaris Management Console.</para><screen># <userinput>/usr/sadm/bin/smc &amp;</userinput></screen><para>For more information on starting the Solaris Management Console, see <xref linkend="smcover-42573" /> or <xref linkend="smcover-23" />.</para>
</step><step xml:id="usersetup-step-20"><para>Click the This Computer icon under the
Management Tools icon in the Navigation pane.</para><para>A list of categories
is displayed.</para>
</step><step xml:id="usersetup-step-21"><para>(Optional) Select the appropriate toolbox
for your name service environment.</para>
</step><step xml:id="usersetup-step-22"><para>Click the System Configuration icon.</para>
</step><step xml:id="usersetup-step-30"><para>Click the User icon.</para>
</step><step xml:id="usersetup-step-31"><para>Provide the superuser password or the role
password.</para>
</step><step xml:id="usersetup-step-32"><para>Click the Groups icon.</para>
</step><step xml:id="usersetup-step-33"><para>Select the group to modify.</para><para>For
example, select <literal>scutters</literal>.</para>
</step><step xml:id="usersetup-step-34"><para>Modify the selected group in the Group
Name: text box. Click OK when you are finished.</para><para>For example, change <literal>scutters</literal> to <literal>scutter</literal>.</para><para>All the users
that were in the <literal>scutters</literal> group are now in the <literal>scutter</literal> group.</para>
</step>
</procedure>
</task><task xml:id="usersetup-52"><title>How to Delete a Group</title><tasksummary><para>Use the following procedure to delete a group.</para>
</tasksummary><procedure>&rolestep.sgm;<step xml:id="usersetup-step-53"><para>Start the Solaris Management Console.</para><screen># <userinput>/usr/sadm/bin/smc &amp;</userinput></screen><para>For more information on starting the Solaris Management Console, see <xref linkend="smcover-42573" /> or <xref linkend="smcover-23" />.</para>
</step><step xml:id="usersetup-step-57"><para>Click the This Computer icon under the
Management Tools icon in the Navigation pane.</para><para>A list of categories
is displayed.</para>
</step><step xml:id="usersetup-step-58"><para>(Optional) Select the appropriate toolbox
for your name service environment.</para>
</step><step xml:id="usersetup-step-67"><para>Click the System Configuration icon.</para>
</step><step xml:id="usersetup-step-68"><para>Click the User icon.</para>
</step><step xml:id="usersetup-step-75"><para>Provide the superuser password or the role
password.</para>
</step><step xml:id="usersetup-step-76"><para>Click the Groups icon.</para>
</step><step xml:id="usersetup-step-77"><para>Select the group to delete.</para><para>For
example, select <literal>scutter</literal>.</para>
</step><step xml:id="usersetup-step-78"><para>Click OK in the popup window.</para><para>The
group is removed from all the users who were a member of this group.</para>
</step>
</procedure>
</task><sect2 xml:id="userconcept-8"><title>Administering Passwords</title><itemizedlist><para><indexterm><primary>Users Tool</primary><secondary>password administration</secondary></indexterm><indexterm><primary>passwords (user)</primary><secondary>Users Tool</secondary></indexterm><indexterm><primary>passwords (user)</primary><secondary>setting</secondary></indexterm><indexterm><primary>passwords (user)</primary><secondary>changing</secondary><tertiary>Users Tool</tertiary></indexterm><indexterm><primary>changing</primary><secondary>user passwords</secondary><tertiary>Users Tool</tertiary></indexterm>You can use the Users tool for password administration.
This tool includes the following capabilities:</para><listitem><para>Specifying a normal password for a user account</para>
</listitem><listitem><para>Enabling users to create their own passwords during their
first login</para>
</listitem><listitem><para>Disabling or locking a user account</para>
</listitem><listitem><para>Specifying expiration dates and password aging information</para>
</listitem>
</itemizedlist><note><para><indexterm xml:id="userconcept-ix366"><primary>passwords (user)</primary><secondary>aging</secondary></indexterm><indexterm xml:id="userconcept-ix367"><primary>aging user passwords</primary></indexterm>Password aging is not supported
by the NIS name service.</para>
</note>
</sect2><sect2 xml:id="userconcept-5"><title>Using Password Aging</title><para>If you are using NIS+ or the <filename>/etc</filename> files to store
user account information, you can set up password aging on a user's password.
Starting in the Solaris 9 12/02 release, password aging is also supported
in the LDAP directory service.</para><para><indexterm xml:id="userconcept-ix81"><primary>passwords (user)</primary><secondary>aging</secondary></indexterm><indexterm xml:id="userconcept-ix82"><primary>aging user passwords</primary></indexterm><indexterm xml:id="userconcept-ix83"><primary>passwords (user)</primary><secondary>description</secondary></indexterm>Password aging enables you to force users to change their passwords
periodically or to prevent a user from changing a password before a specified
interval. If you want to prevent an intruder from gaining undetected access
to the system by using an old and inactive account, you can also set a password
expiration date when the account becomes disabled. You can set password aging
attributes with the <command>passwd</command> command or the Solaris Management
Console's Users tool.  </para><para>For information about starting the Solaris Management Console, see <xref linkend="smcover-42573" />.</para>
</sect2><task xml:id="usersetup-58"><title>How to Disable a User Account</title><tasksummary><para>Use the following procedure if you need to disable a user account.</para>
</tasksummary><procedure>&rolestep.sgm;<step xml:id="usersetup-step-79"><para>Start the Solaris Management Console.</para><screen># <userinput>/usr/sadm/bin/smc &amp;</userinput></screen><para>For more information on starting the Solaris Management Console, see <xref linkend="smcover-42573" /> or <xref linkend="smcover-23" />.</para>
</step><step xml:id="usersetup-step-80"><para>Click the This Computer icon under the
Management Tools icon in the Navigation pane.</para><para>A list of categories
is displayed.</para>
</step><step xml:id="usersetup-step-81"><para>(Optional) Select the appropriate toolbox
for your name service environment.</para>
</step><step xml:id="usersetup-step-82"><para>Click the System Configuration icon.</para>
</step><step xml:id="usersetup-step-83"><para>Click the User icon and provide the superuser
password or the role password.</para>
</step><step xml:id="usersetup-step-85"><para>Click the User Accounts icon. </para>
</step><step><para>Double&ndash;click the user.</para><para>For example, select <literal>scutter2</literal>.</para>
</step><step xml:id="usersetup-step-87"><para>Select the Account is Locked option in
the Account Availability section of the General tab features. </para>
</step><step xml:id="usersetup-step-88"><para>Click OK.</para>
</step>
</procedure>
</task><task xml:id="usersetup-53"><title>How to Change a User's Password</title><tasksummary><para>Use the following procedure when a user forgets her password.</para>
</tasksummary><procedure>&rolestep.sgm;<step xml:id="usersetup-step-89"><para>Start the Solaris Management Console.</para><screen># <userinput>/usr/sadm/bin/smc &amp;</userinput></screen><para>For more information on starting the Solaris Management Console, see <xref linkend="smcover-42573" /> or <xref linkend="smcover-23" />.</para>
</step><step xml:id="usersetup-step-90"><para>Click the This Computer icon under the
Management Tools icon in the Navigation pane.</para><para>A list of categories
is displayed.</para>
</step><step xml:id="usersetup-step-91"><para>(Optional) Select the appropriate toolbox
for your name service environment.</para>
</step><step xml:id="usersetup-step-92"><para>Click the System Configuration icon.</para>
</step><step xml:id="usersetup-step-93"><para>Click the User icon.</para>
</step><step xml:id="usersetup-step-94"><para>Provide the superuser password or the role
password.</para>
</step><step xml:id="usersetup-step-95"><para>Click the User Accounts icon, then double&ndash;click
the user who needs a new password.</para><para>For example, select <literal>scutter1</literal>.</para>
</step><step><para>Select the Password tab, then select the User Must Use This Password
at Next Login option. .</para>
</step><step><para>Enter the user's new password and click OK.</para>
</step>
</procedure>
</task><task xml:id="usersetup-57"><title>How to Set Password Aging on a User Account</title><tasksummary><para>Use the following procedure to set password aging on a user account.</para>
</tasksummary><procedure>&rolestep.sgm;<step xml:id="usersetup-step-101"><para>Start the Solaris Management Console.</para><screen># <userinput>/usr/sadm/bin/smc &amp;</userinput></screen><para>For more information on starting the Solaris Management Console, see <xref linkend="smcover-42573" /> or <xref linkend="smcover-23" />.</para>
</step><step xml:id="usersetup-step-102"><para>Click the This Computer icon under the
Management Tools icon in the Navigation pane.</para><para>A list of categories
is displayed.</para>
</step><step xml:id="usersetup-step-103"><para>(Optional) Select the appropriate toolbox
for your name service environment.</para>
</step><step xml:id="usersetup-step-104"><para>Click the System Configuration icon.</para>
</step><step xml:id="usersetup-step-105"><para>Click the User Accounts icon and provide
the superuser password or the role password.</para>
</step><step xml:id="usersetup-step-107"><para>Click the User Accounts icon.</para>
</step><step xml:id="usersetup-step-108"><para>Double&ndash;click the user, then select
the Password Options tab.</para><para>For example, select <literal>scutter2</literal>.</para>
</step><step xml:id="usersetup-step-109"><para>Select the Password Options tab.</para>
</step><step xml:id="usersetup-step-110"><para>Select the appropriate Password Options
in Days option and click OK.</para><para>For example, select Users Must Change
Within to set a date when the user must change his or her password.</para>
</step>
</procedure>
</task><task xml:id="usersetup-59"><title>How to Delete a User Account</title><tasksummary><para>Use the following procedure to remove a user account.</para>
</tasksummary><procedure>&rolestep.sgm;<step xml:id="usersetup-step-112"><para>Start the Solaris Management Console.</para><screen># <userinput>/usr/sadm/bin/smc &amp;</userinput></screen><para>For more information on starting the Solaris Management Console, see <xref linkend="smcover-42573" /> or <xref linkend="smcover-23" />.</para>
</step><step xml:id="usersetup-step-113"><para>Click the This Computer icon under the
Management Tools icon in the Navigation pane.</para><para>A list of categories
is displayed.</para>
</step><step xml:id="usersetup-step-114"><para>(Optional) Select the appropriate toolbox
for your name service environment.</para>
</step><step xml:id="usersetup-step-115"><para>Click the System Configuration icon.</para>
</step><step xml:id="usersetup-step-116"><para>Click the User icon.</para>
</step><step xml:id="usersetup-step-117"><para>Provide the superuser password or the
role password.</para>
</step><step xml:id="usersetup-step-118"><para>Click the User Accounts icon.</para>
</step><step xml:id="usersetup-step-119"><para>Double&ndash;click the user account to
be removed.</para><para>For example, select <literal>scutter4</literal>.</para>
</step><step xml:id="usersetup-step-120"><para>Click Delete in the popup window if you
are sure you want to remove the user account.</para><para>You are prompted
to remove the user's home directory and mailbox contents.</para>
</step>
</procedure>
</task>
</sect1>
</chapter><?Pub *0000058150 0?>
